

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>kineticstoolkit.geometry module &#8212; Kinetics Toolkit master documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="kineticstoolkit.gui module" href="kineticstoolkit.gui.html" />
    <link rel="prev" title="kineticstoolkit.filters module" href="kineticstoolkit.filters.html" />



  
   

  </head>
  <body dir=ltr
        data-md-color-primary=white data-md-color-accent=orange>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#api/kineticstoolkit.geometry" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="Kinetics Toolkit master documentation"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/logo.png" height="26"
                   alt="Kinetics Toolkit master documentation logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Kinetics Toolkit</span>
          <span class="md-header-nav__topic"> kineticstoolkit.geometry module </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/felixchenier/kineticstoolkit/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    kineticstoolkit
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../api_reference.html" class="md-tabs__link">API Reference</a></li>
          <li class="md-tabs__item"><a href="modules.html" class="md-tabs__link">kineticstoolkit</a></li>
          <li class="md-tabs__item"><a href="kineticstoolkit.html" class="md-tabs__link">kineticstoolkit package</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Kinetics Toolkit master documentation" class="md-nav__button md-logo">
      
        <img src="../_static/logo.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Kinetics Toolkit master documentation">Kinetics Toolkit</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/felixchenier/kineticstoolkit/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    kineticstoolkit
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">INSTALLING</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../install.html" class="md-nav__link">Installing the stable version</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../install_develop.html" class="md-nav__link">Installing the development version</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">THE BASICS</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../timeseries.html" class="md-nav__link">Getting started with TimeSeries</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../filters.html" class="md-nav__link">Filtering TimeSeries</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../cycles.html" class="md-nav__link">Detecting and normalizing cycles</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../geometry.html" class="md-nav__link">Rigid transformations, coordinates and reference frames</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../loadsave.html" class="md-nav__link">Saving and loading</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">INTEGRATED BIOMECHANICAL ANALYSES</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../kinematics.html" class="md-nav__link">Kinematics analysis</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../pushrimkinetics.html" class="md-nav__link">Wheelchair kinetics</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../inversedynamics.html" class="md-nav__link">Inverse Dynamics</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">MORE IN DEPTH</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../labmode.html" class="md-nav__link">Lab mode</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../dbinterface.html" class="md-nav__link">DBInterface</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../release_notes.html" class="md-nav__link">Release Notes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../api_reference.html" class="md-nav__link">API Reference</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="https://felixchenier.uqam.ca/kineticstoolkit" class="md-nav__link">Stable version</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
  <ul class="md-nav__list" data-md-scrollfix="">
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  
<span id="kineticstoolkit-geometry-module"></span><h1 id="api-kineticstoolkit-geometry--page-root">kineticstoolkit.geometry module<a class="headerlink" href="#api-kineticstoolkit-geometry--page-root" title="Permalink to this headline">¶</a></h1>
<p>Provide 3d geometry and linear algebra functions related to biomechanics.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a convention, the first dimension of every array is always N and corresponds
to time. For constants, use a length of 1 as the first dimension.</p>
</div>
<p><strong>Functions</strong></p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%"/>
<col style="width: 90%"/>
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#kineticstoolkit.geometry.create_reference_frames" title="kineticstoolkit.geometry.create_reference_frames"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_reference_frames</span></code></a>(origin[, x, y, z, …])</p></td>
<td><p>Create a Nx4x4 series of reference frames based on a point cloud series.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#kineticstoolkit.geometry.create_rotation_matrices" title="kineticstoolkit.geometry.create_rotation_matrices"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_rotation_matrices</span></code></a>(seq, angles[, degrees])</p></td>
<td><p>Create an Nx4x4 series of rotation matrices from Euler coordinates.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#kineticstoolkit.geometry.get_euler_angles" title="kineticstoolkit.geometry.get_euler_angles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_euler_angles</span></code></a>(T, seq[, degrees, alt_angles])</p></td>
<td><p>Represent a series of transformation matrices as series of Euler angles.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#kineticstoolkit.geometry.get_global_coordinates" title="kineticstoolkit.geometry.get_global_coordinates"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_global_coordinates</span></code></a>(local_coordinates, …)</p></td>
<td><p>Express local coordinates in the global reference frame.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#kineticstoolkit.geometry.get_local_coordinates" title="kineticstoolkit.geometry.get_local_coordinates"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_local_coordinates</span></code></a>(global_coordinates, …)</p></td>
<td><p>Express global coordinates in local reference frames.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#kineticstoolkit.geometry.isnan" title="kineticstoolkit.geometry.isnan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isnan</span></code></a>(input, /)</p></td>
<td><p>Check which samples has at least one NaN.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#kineticstoolkit.geometry.match_size" title="kineticstoolkit.geometry.match_size"><code class="xref py py-obj docutils literal notranslate"><span class="pre">match_size</span></code></a>(op1, op2)</p></td>
<td><p>Match the first dimension of op1 and op2.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#kineticstoolkit.geometry.matmul" title="kineticstoolkit.geometry.matmul"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matmul</span></code></a>(op1, op2)</p></td>
<td><p>Matrix multiplication between series of matrices.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#kineticstoolkit.geometry.register_points" title="kineticstoolkit.geometry.register_points"><code class="xref py py-obj docutils literal notranslate"><span class="pre">register_points</span></code></a>(global_points, local_points)</p></td>
<td><p>Find the rigid transformations between two series of point clouds.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt id="kineticstoolkit.geometry.create_reference_frames">
<code class="sig-prename descclassname">kineticstoolkit.geometry.</code><code class="sig-name descname">create_reference_frames</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">origin</span></em>, <em class="sig-param"><span class="n">x</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">y</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">z</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xy</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xz</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">yz</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#kineticstoolkit.geometry.create_reference_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Nx4x4 series of reference frames based on a point cloud series.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unreleased function.</p>
<p>This function is currently being developped, tested or validated and has
not been released yet. It may change signature and behaviour or even be
deleted.</p>
</div>
<p>Create reference frames based on points and vectors and returns this series
of reference frames as a series of transformation matrices.</p>
<p>This function’s behaviour is better explained using an example. We will
create reference frames for the right humerus, based on the recommendations
of the International Society of Biomechanics [1]. Lets say we have
constructed series of points for the glenohumeral joint (GH), lateral elbow
epicondyle (EL) and medial elbow epicondyle (EM). Following the ISB:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The origin is GH;</p></li>
<li><p>The y axis is the line between GH and the midpoint of EL and EM,
pointing to GH;</p></li>
<li><p>The x axis is the normal to the GH-EL-EM plane, pointing forward;
which means that GH-EL-EM is a yz plane.</p></li>
<li><p>The z axis is perpendicular to x and y, pointing to the right.</p></li>
</ol>
</div></blockquote>
<p>Therefore:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>origin = GH</p></li>
<li><p>y = GH - (EL + EM) / 2</p></li>
<li><p>yz = EL - EM  # The x axis is formed by cross(y, yz)</p></li>
<li><dl class="simple">
<dt>reference_frames = ktk.geometry.create_reference_frames(</dt><dd><p>origin=origin, y=y, yz=yz)</p>
</dd>
</dl>
</li>
</ol>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origin</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – A series of N points (Nx4) that corresponds to the origin of the
returned reference frames.</p></li>
<li><p><strong>x|y|z</strong> – A series of N vectors (Nx4) that are aligned toward the {x|y|z}
axis of the returned reference frames.</p></li>
<li><p><strong>xy|xz</strong> – When x is specified, a series of N vectors (Nx4) in the {xy|xz} plane
of the returned reference frames.</p></li>
<li><p><strong>xy|yz</strong> – When y is specified, a series of N vectors (Nx4) in the {xy|yz} plane
of the returned reference frames.</p></li>
<li><p><strong>xz|yz</strong> – When z is specified, a series of N vectors (Nx4) in the {xz|yz} plane
of the returned reference frames.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Series of transformation matrices (Nx4x4).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Create a translated reference frame using 3 points:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">kineticstoolkit.lab</span> <span class="k">as</span> <span class="nn">ktk</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">origin</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">10.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xy</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">10.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf</span> <span class="o">=</span> <span class="n">ktk</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">create_reference_frames</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="n">xy</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf</span>
<span class="go">array([[[1., 0., 0., 2.],</span>
<span class="go">        [0., 1., 0., 2.],</span>
<span class="go">        [0., 0., 1., 2.],</span>
<span class="go">        [0., 0., 0., 1.]]])</span>
</pre></div>
</div>
<div class="admonition-references admonition">
<p class="admonition-title">References</p>
<ol class="arabic simple">
<li><p>G. Wu et al., “ISB recommendation on definitions of joint
coordinate systems of various joints for the reporting of human joint
motion - Part II: shoulder, elbow, wrist and hand,” Journal of
Biomechanics, vol. 38, no. 5, pp. 981–992, 2005.</p></li>
</ol>
</div>
</dd></dl>
<dl class="py function">
<dt id="kineticstoolkit.geometry.create_rotation_matrices">
<code class="sig-prename descclassname">kineticstoolkit.geometry.</code><code class="sig-name descname">create_rotation_matrices</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">seq</span></em>, <em class="sig-param"><span class="n">angles</span></em>, <em class="sig-param"><span class="n">degrees</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#kineticstoolkit.geometry.create_rotation_matrices" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an Nx4x4 series of rotation matrices from Euler coordinates.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unreleased function.</p>
<p>This function is currently being developped, tested or validated and has
not been released yet. It may change signature and behaviour or even be
deleted.</p>
</div>
<p>This function is a wrapper for scipy.transform.Rotation.from_euler.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seq</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Specifies sequence of axes for rotations. Up to 3 characters belonging
to the set {‘X’, ‘Y’, ‘Z’} for intrinsic rotations (moving axes), or
{‘x’, ‘y’, ‘z’} for extrinsic rotations (fixed axes). Extrinsic and
intrinsic rotations cannot be mixed in one function call.</p></li>
<li><p><strong>angles</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – <p>float or array_like, shape (N,) or (N, [1 or 2 or 3]). Euler angles
specified in radians (degrees is False) or degrees (degrees is True).
For a single character seq, angles can be:</p>
<blockquote>
<div><ul>
<li><p>a single value</p></li>
<li><p>array_like with shape (N,), where each angle[i] corresponds to a
single rotation</p></li>
<li><p>array_like with shape (N, 1), where each angle[i, 0] corresponds
to a single rotation</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>For 2- and 3-character wide seq, angles can be:</dt><dd><ul>
<li><p>array_like with shape (W,) where W is the width of seq, which
corresponds to a single rotation with W axes</p></li>
<li><p>array_like with shape (N, W) where each angle[i] corresponds to
a sequence of Euler angles describing a single rotation</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>degrees</strong> – If True, then the given angles are assumed to be in degrees. Default
is False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An Nx4x4 series of rotation matrices.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Create a rotation matrix that rotates 0, then 90 degrees around x:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">kineticstoolkit.lab</span> <span class="k">as</span> <span class="nn">ktk</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ktk</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">create_rotation_matrices</span><span class="p">(</span><span class="s1">'x'</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">degrees</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([[[ 1.,  0.,  0.,  0.],</span>
<span class="go">        [ 0.,  1.,  0.,  0.],</span>
<span class="go">        [ 0.,  0.,  1.,  0.],</span>
<span class="go">        [ 0.,  0.,  0.,  1.]],</span>

<span class="go">       [[ 1.,  0.,  0.,  0.],</span>
<span class="go">        [ 0.,  0., -1.,  0.],</span>
<span class="go">        [ 0.,  1.,  0.,  0.],</span>
<span class="go">        [ 0.,  0.,  0.,  1.]]])</span>
</pre></div>
</div>
</dd></dl>
<dl class="py function">
<dt id="kineticstoolkit.geometry.get_euler_angles">
<code class="sig-prename descclassname">kineticstoolkit.geometry.</code><code class="sig-name descname">get_euler_angles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="n">seq</span></em>, <em class="sig-param"><span class="n">degrees</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">alt_angles</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#kineticstoolkit.geometry.get_euler_angles" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent a series of transformation matrices as series of Euler angles.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unreleased function.</p>
<p>This function is currently being developped, tested or validated and has
not been released yet. It may change signature and behaviour or even be
deleted.</p>
</div>
<p>This function is a wrapper for scipy.transform.Rotation.as_euler. Please
consult scipy help for the complete docstring.</p>
<p>Euler angles suffer from the problem of gimbal lock, where the
representation loses a degree of freedom and it is not possible to
determine the first and third angles uniquely. In this case, a warning is
raised, and the third angle is set to zero. Note however that the returned
angles still represent the correct rotation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – An Nx4x4 series of transformation matrices.</p></li>
<li><p><strong>seq</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – 3 characters belonging to the set {‘X’, ‘Y’, ‘Z’} for intrinsic
rotations (moving axes), or {‘x’, ‘y’, ‘z’} for extrinsic rotations
(fixed axes). Adjacent axes cannot be the same. Extrinsic and
intrinsic rotations cannot be mixed in one function call.</p></li>
<li><p><strong>degrees</strong> – Returned angles are in degrees if this flag is True, else they are in
radians. Default is False.</p></li>
<li><p><strong>alt_angles</strong> – <p>Return an alternate sequence with the second angle inverted, that
leads to the same rotation matrices. More specifically:</p>
<p>First angle belongs to [-180, 180] degrees (both inclusive)</p>
<dl class="simple">
<dt>Second angle belongs to:</dt><dd><ul>
<li><dl class="simple">
<dt>Default case (alt_angles = False):</dt><dd><ul>
<li><p>[-90, 90] degrees if all axes are different (like xyz)</p></li>
<li><p>[0, 180] degrees if first and third axes are the same
(like zxz)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Alternate case (alt_angles = True):</dt><dd><ul>
<li><p>[-180, -90], [90, 180] degrees if all axes are different
(like xyz)</p></li>
<li><p>[-180, 0] degrees if first and third axes are the same
(like zxz)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p>Third angle belongs to [-180, 180] degrees (both inclusive)</p>
<p>One rationale for adding this special case is the calculation
of shoulder angles: when following the ISB recommendation (YXY), X
corresponds to the negative elevation and thus we expect to get
negative values for Y. In this case, just use alt_angles = True.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Tx3 array of Euler angles.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="kineticstoolkit.geometry.get_global_coordinates">
<code class="sig-prename descclassname">kineticstoolkit.geometry.</code><code class="sig-name descname">get_global_coordinates</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local_coordinates</span></em>, <em class="sig-param"><span class="n">reference_frames</span></em><span class="sig-paren">)</span><a class="headerlink" href="#kineticstoolkit.geometry.get_global_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Express local coordinates in the global reference frame.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unreleased function.</p>
<p>This function is currently being developped, tested or validated and has
not been released yet. It may change signature and behaviour or even be
deleted.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_coordinates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – <p>The local coordinates, as a series of N points, vectors or matrices.
For example:</p>
<ul>
<li><p>A series of N points or vectors : Nx4</p></li>
<li><p>A series of N set of M points or vectors : Nx4xM</p></li>
<li><p>A series of N 4x4 transformation matrices : Nx4x4</p></li>
</ul>
</p></li>
<li><p><strong>reference_frames</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – A series of N reference frames (Nx4x4) the local coordinates are
expressed in.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Series of global coordinates in the same shape than
<cite>local_coordinates</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="kineticstoolkit.geometry.get_local_coordinates">
<code class="sig-prename descclassname">kineticstoolkit.geometry.</code><code class="sig-name descname">get_local_coordinates</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">global_coordinates</span></em>, <em class="sig-param"><span class="n">reference_frames</span></em><span class="sig-paren">)</span><a class="headerlink" href="#kineticstoolkit.geometry.get_local_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Express global coordinates in local reference frames.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unreleased function.</p>
<p>This function is currently being developped, tested or validated and has
not been released yet. It may change signature and behaviour or even be
deleted.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>global_coordinates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – <p>The global coordinates, as a series of N points, vectors or matrices.
For example:</p>
<ul>
<li><p>A series of N points or vectors : Nx4</p></li>
<li><p>A series of N set of M points or vectors : Nx4xM</p></li>
<li><p>A series of N 4x4 transformation matrices : Nx4x4</p></li>
</ul>
</p></li>
<li><p><strong>reference_frames</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – A series of N reference frames (Nx4x4) to express the global
coordinates in.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Series of local coordinates in the same shape than
<cite>global_coordinates</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="kineticstoolkit.geometry.isnan">
<code class="sig-prename descclassname">kineticstoolkit.geometry.</code><code class="sig-name descname">isnan</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input</span></em>, <em class="sig-param"><span class="o">/</span></em><span class="sig-paren">)</span><a class="headerlink" href="#kineticstoolkit.geometry.isnan" title="Permalink to this definition">¶</a></dt>
<dd><p>Check which samples has at least one NaN.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unreleased function.</p>
<p>This function is currently being developped, tested or validated and has
not been released yet. It may change signature and behaviour or even be
deleted.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Array where the first dimension corresponds to time.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of bool that is the same size of input’s first dimension, with
True for the samples that contain at least one NaN.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="kineticstoolkit.geometry.match_size">
<code class="sig-prename descclassname">kineticstoolkit.geometry.</code><code class="sig-name descname">match_size</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">op1</span></em>, <em class="sig-param"><span class="n">op2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#kineticstoolkit.geometry.match_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Match the first dimension of op1 and op2.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unreleased function.</p>
<p>This function is currently being developped, tested or validated and has
not been released yet. It may change signature and behaviour or even be
deleted.</p>
</div>
<p>Broadcasts the first dimension of op1 or op2, if required, so that both
inputs have the same size in first dimension. If no modification is
required on an input, then the output is a reference to the same input.
Otherwise, the output is a new variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>References or copies of op1 and op2 now matched in size.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>2x np.ndarray</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="kineticstoolkit.geometry.matmul">
<code class="sig-prename descclassname">kineticstoolkit.geometry.</code><code class="sig-name descname">matmul</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">op1</span></em>, <em class="sig-param"><span class="n">op2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#kineticstoolkit.geometry.matmul" title="Permalink to this definition">¶</a></dt>
<dd><p>Matrix multiplication between series of matrices.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unreleased function.</p>
<p>This function is currently being developped, tested or validated and has
not been released yet. It may change signature and behaviour or even be
deleted.</p>
</div>
<p>This function is a wrapper for numpy’s matmul function (operator @), that
helps numpy to understand Kinetics Toolkit’s convention that the first
dimension always corresponds to time.</p>
<p>It aligns and create additionnal dimensions if needed to avoid dimension
mismatch errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>op1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Series of floats, vectors or matrices.</p></li>
<li><p><strong>op2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Series of floats, vectors or matrices.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The product, as a series of Nx4 or Nx4xM matrices.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="kineticstoolkit.geometry.register_points">
<code class="sig-prename descclassname">kineticstoolkit.geometry.</code><code class="sig-name descname">register_points</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">global_points</span></em>, <em class="sig-param"><span class="n">local_points</span></em><span class="sig-paren">)</span><a class="headerlink" href="#kineticstoolkit.geometry.register_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the rigid transformations between two series of point clouds.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unreleased function.</p>
<p>This function is currently being developped, tested or validated and has
not been released yet. It may change signature and behaviour or even be
deleted.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>global_points</strong> (<em>array of shape Nx4xM</em>) – Destination points as a series of N sets of M points.</p></li>
<li><p><strong>local_points</strong> (<em>array of shape Nx4xM</em>) – Local points as a series of N sets of M points.
global_points and local_points must have the same shape.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of shape Nx4x4, expressing a series of 4x4 rigid transformation
matrices.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>



          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="kineticstoolkit.filters.html" title="kineticstoolkit.filters module"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> kineticstoolkit.filters module </span>
              </div>
            </a>
          
          
            <a href="kineticstoolkit.gui.html" title="kineticstoolkit.gui module"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> kineticstoolkit.gui module </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2020, Félix Chénier.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>